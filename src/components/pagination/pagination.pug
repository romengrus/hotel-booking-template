//- Pagination 
//- ====================
//- Expected output (delta = 1, total = 1):
//- Selected page 1: ''
//- ====================
//- Expected output (delta = 1, total = 2):
//- Selected page 1: [(1), 2]
//- Selected page 2: [1, (2)]
//- ====================
//- Expected output (delta = 1, total = 3):
//- Selected page 1: [(1), 2, 3, ->]
//- Selected page 2: [<-, 1, (2), 3, ->]
//- Selected page 3: [<-, 1, 2, (3)]
//- ====================
//- Expected output (delta = 1, total = 4):
//- Selected page 1: [(1), 2, "...", 4, ->]
//- Selected page 2: [<-, 1, (2), 3, 4, ->]
//- Selected page 3: [<-, 1, 2, (3), 4, ->]
//- Selected page 4: [<-, 1, "...", 3, (4)]
//- ====================
//- Expected output (delta = 2, total = 20):
//- Selected page 1: [(1), 2, 3, "...", 20, ->]
//- Selected page 2: [<-, 1, (2), 3, 4, "...", 20, ->]
//- Selected page 3: [<-, 1, 2, (3), 4, 5, "...", 20, ->]
//- Selected page 4: [<-, 1, 2, 3, (4), 5, 6, "...", 20, ->]
//- Selected page 5: [<-, 1, 2, 3, 4, (5), 6, 7, "...", 20, ->]
//- Selected page 6: [<-, 1, "...", 4, 5, (6), 7, 8, "...", 20, ->]
//- Selected page 7: [<-, 1, "...", 5, 6, (7), 8, 9, "...", 20, ->]
//- Selected page 8: [<-, 1, "...", 6, 7, (8), 9, 10, "...", 20, ->]
//- Selected page 9: [<-, 1, "...", 7, 8, (9), 10, 11, "...", 20, ->]
//- Selected page 10: [<-, 1, "...", 8, 9, (10), 11, 12, "...", 20, ->]
//- Selected page 11: [<-, 1, "...", 9, 10, (11), 12, 13, "...", 20, ->]
//- Selected page 12: [<-, 1, "...", 10, 11, (12), 13, 14, "...", 20, ->]
//- Selected page 13: [<-, 1, "...", 11, 12, (13), 14, 15, "...", 20, ->]
//- Selected page 14: [<-, 1, "...", 12, 13, (14), 15, 16, "...", 20, ->]
//- Selected page 15: [<-, 1, "...", 13, 14, (15), 16, 17, "...", 20, ->]
//- Selected page 16: [<-, 1, "...", 14, 15, (16), 17, 18, 19, 20, ->]
//- Selected page 17: [<-, 1, "...", 15, 16, (17), 18, 19, 20, ->]
//- Selected page 18: [<-, 1, "...", 16, 17, (18), 19, 20, ->]
//- Selected page 19: [<-, 1, "...", 17, 18, (19), 20, ->]
//- Selected page 20: [<-, 1, "...", 18, 19, (20)]
//- ====================
//- 
//- currentPage     number (1) - Current page number
//- perPage         number (10) - Items to show per page
//- totalItems      number (0) - Total items in listing
//- delta           number (2) - Number of pages always visible from the left & right side of current page
//- label           string - Label template text.
//-                         Can use variables:
//-                           * idxFrom     {number} Index of first item on page
//-                           * idxTo       {number} Index of last item on page
//-                           * totalItems  {number} Total items in listing
//-                           * perPage     {number} Items shown per page
//-                         Can use functions:
//-                           * approximately(num) -> number rounded to nearest 10 downwards, adding '+' if needed
//-                           * any other js function ... 
//- showLabel       boolean (true) - If true - label will be shown, false - otherwise
//- labelPosition   oneOf ('left' | 'right' | 'top' | 'bottom')
mixin pagination(
  currentPage = 1,
  perPage = 10,
  totalItems = 0,
  delta = 2,
  label = "${idxFrom} - ${idxTo} from ${approximately(totalItems)} variants for rent",
  showLabel = true,
  labelPosition = 'bottom'
)
  -
    const classList = ['pagination', `pagination_label-pos-${labelPosition}`]
    const lastPage = Math.ceil(props.totalItems / props.perPage)
    const idxFrom = 1
    const idxTo = 12
    const arrowMods = ['pagination__arrow']
    const pageMods = ['pagination__page']

    function approximately(n, to = 10) {
      const x = Math.floor(n / to) * to
      if (x < n) return `${x}+`
      return `${x}`   
    }

    function inScope(page, currentPage, delta) {
      return (page >= currentPage - delta) 
          && (page <= currentPage + delta);
    }

    function atScopeBoundary(page, currentPage, delta) {
      return (page === currentPage - delta - 1) 
          || (page === currentPage + delta + 1);
    }
  
  div(class = classList)
    if (lastPage > 1)
      .pagination__listing
        //- prev arrow
        if (currentPage > 1 && lastPage > 2)
          a(href = dummyURL, class = arrowMods.concat('pagination__prev'))

        //- main listing
        - for(let i = 1; i <= lastPage; i += 1)
          if (i === currentPage)
            a(href = dummyURL, class = pageMods.concat('pagination__page-current'))= i
          else if (i === 1)
            a(href = dummyURL, class = pageMods.concat('pagination__page-first'))= i
          else if (i === lastPage)
            a(href = dummyURL, class = pageMods.concat('pagination__page-last')})= i
          else if (inScope(i, currentPage, delta))
            a(href = dummyURL, class = pageMods.concat('pagination__page-delta')})= i
          else if (atScopeBoundary(i, currentPage, delta))
            span(class= pageMods.concat('pagination__dots')) ...

        //- next arrow
        if (currentPage < lastPage && lastPage > 2)
          a(href = dummyURL, class = arrowMods.concat('pagination__next'))

      if (props.showLabel)
        .pagination__label= eval('`' + label + '`')