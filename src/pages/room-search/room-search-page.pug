extends /layout/left-sidebar.pug

block variables
  - var pageTitle = 'Room Search & Filter'
  - var bodyClass = 'room-search-page'

block append scripts
  script(src= '/pages/room-search/room-search-page.js')

block append parts
  include /components/library/form/form.pug
  include /components/library/form-field-datetime/form-field-datetime.pug
  include /components/library/dropdown-counter/dropdown-counter.pug
  include /components/library/form-field-range-slider/form-field-range-slider.pug
  include /components/library/form-field-checkbox/form-field-checkbox.pug
  include /components/library/panel/panel.pug
  include /components/library/pagination/pagination.pug
  include /components/project/room-card/room-card.pug

block sidebar
  aside.sidebar
    +form(action= '#', method= 'POST', class= 'room-filter js-room-filter')
      .room-filter__dates
        label.room-filter__label Даты пребывания в отеле
          +form-field-datetime({
            useDatepicker: true, 
            dateFormat: 'd M', 
            datepickerMode: 'range',
            mods: ['arrival-date__input']
          })(placeholder='ДД М - ДД М')

      .room-filter__guests
        label.room-filter__label Гости
          +dropdown-counter({
            counters: [{
                label: 'взрослые',
                plurals: ['взрослый', 'взрослых', 'взрослых'],
                objectId: '18+'
              },
              {
                label: 'дети',
                plurals: ['ребенок', 'детей', 'детей'],
                objectId: 'child'
              },
              {
                label: 'младенцы',
                plurals: ['младенец', 'младенца', 'младенцев'],
                objectId: 'toddler',
                min: 0,
                max: 2
            }],
            displayType: 'total',
            plurals: ['гость', 'гостя', 'гостей'],
            mods: ['counter__input']
          })(placeholder= 'Сколько гостей')

      .room-filter__price
        +form-field-range-slider({params: {
          start: [5000, 10000],
          range: {min: 1000, max: 20000},
          connect: [false, true, false],
          format: {
            decimals: 0,
            thousand: ' ',
            suffix: '₽'
          }
        },
          label: 'Диапазон цены',
          desc: 'Стоимость за сутки пребывания в номере'
        })

      fieldset.room-filter__permissions 
        legend.room-filter__label Checkbox Buttons
        +form-field-checkbox({label: 'Можно курить'})
        +form-field-checkbox({label: 'Можно с питомцами'})
        +form-field-checkbox({label: 'Можно пригласить гостей', desc: '(до 10 человек)'})

      fieldset.room-filter__accessability 
        legend.room-filter__label Доступность
        +form-field-checkbox({
          label: 'Широкий коридор', 
          desc: 'Ширина коридора в номере не менее 91 см.', 
          mods: ['checkbox_rich']
        })
        +form-field-checkbox({
          label: 'Помошник для инвалидов',
          desc: 'На 1 этаже вас встретит специалист и проводит до номера',
          mods: ['checkbox_rich']
        })

      .room-filter__facilities
        label.room-filter__label Удобства номера
          +dropdown-counter({
            counters: [{
                label: 'спальни',
                plurals: ['спальня', 'спальни', 'спален'],
                objectId: 'bedroom'
              },
              {
                label: 'кровати',
                plurals: ['кровать', 'кровати', 'кроватей'],
                objectId: 'bed'
              },
              {
                label: 'ванные комнаты',
                plurals: ['ванная комната', 'ванные комнаты', 'ванных комнат'],
                objectId: 'bathroom'
            }],
            displayType: 'concat',
          })&attributes({placeholder: 'Выберите нужное количество ...'})

      +panel({title: 'Дополнительные удобства', isCollapsed: true, mods: 'room-filter__additional-facilities'})
        +form-field-checkbox({label: 'Завтрак'})
        +form-field-checkbox({label: 'Письменный стол'})(checked= true)
        +form-field-checkbox({label: 'Стул для кормления'})(checked= true)
        +form-field-checkbox({label: 'Кроватка'})(checked= true)
        +form-field-checkbox({label: 'Телевизор'})
        +form-field-checkbox({label: 'Шампунь'})
        +form-field-checkbox({label: 'Телевизор'})
        +form-field-checkbox({label: 'Шампунь'})

block content
  article.content
    a.room-filter__toggle.js-room-filter__toggle Изменить параметры поиска
    h2.content__header Номера, которые мы для вас подобрали

    div(class= 'room-cards')
      - var roomCards = getData('roomCards')
      each roomData in roomCards
        +room-card(roomData)

    +pagination({
      totalItems: 170, 
      perPage: 12, 
      currentPage: 1, 
      labelPosition: 'bottom',
    })